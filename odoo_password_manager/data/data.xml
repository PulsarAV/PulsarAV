<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Archive -->
        <record id="password_key_archive" model="ir.actions.server">
            <field name="name">Archive passwords</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key" />
            <field name="state">code</field>
            <field name="code">
if records:
    records.write({"active": False})
            </field>
        </record>
        <!-- Restore -->
        <record id="password_key_restore" model="ir.actions.server">
            <field name="name">Restore passwords</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
if records:
    records.write({"active": True})
            </field>
        </record>
        <!-- Duplicate -->
        <record id="password_key_copy" model="ir.actions.server">
            <field name="name">Duplicate passwords</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
for record in records:
    record.copy()
            </field>
        </record>
        <!-- Trigger the wizard to add/remove tags -->
        <record id="password_key_upd_tags" model="ir.actions.server">
            <field name="name">Update tags</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
action = env.ref("odoo_password_manager.update_password_tag_action").sudo().read()[0]
            </field>
        </record>
        <!-- Trigger the wizard to update a password partner -->
        <record id="password_key_upd_partner" model="ir.actions.server">
            <field name="name">Update partner</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
action = env.ref("odoo_password_manager.update_password_partner_action").sudo().read()[0]
            </field>
        </record>
        <!-- Trigger the wizard to merge passwords to the main one -->
        <record id="password_key_merge" model="ir.actions.server">
            <field name="name">Merge passwords</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
action = env.ref("odoo_password_manager.odoo_password_merge_action").sudo().read()[0]
if records:
    action["context"] = {"default_main_password_id": records[0].id}
            </field>
        </record>
        <!-- Add a password to favorite for the current user -->
        <record id="password_key_add_to_favourite" model="ir.actions.server">
            <field name="name">Add to favorite</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="safe_pwm_action">True</field>
            <field name="code">
if records:
    user = env.user.id
    records.sudo().write({"favourite_user_ids": [(4, env.user.id)]})
            </field>
        </record>
        <!-- Remove a password from favorites for the current user -->
        <record id="password_key_remove_from_favourite" model="ir.actions.server">
            <field name="name">Remove from favorite</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
if records:
    user = env.user.id
    records.write({"favourite_user_ids": [(3, user)]})
            </field>
        </record>
        <!-- Delete a password -->
        <record id="password_key_unlink" model="ir.actions.server">
            <field name="name">Delete</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="odoo_password_manager.model_password_key"/>
            <field name="state">code</field>
            <field name="code">
if records:
    records.unlink()
            </field>
        </record>

    </data>
</odoo>
